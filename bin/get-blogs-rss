#!/usr/bin/perl

# Copyright 2011 Paul Wise
# Released under the MIT/Expat license, see doc/COPYING

# Downloads the blog web pages and detects available RSS/Atom feeds using
# standard automatic feed discovery, which is documented here:
#
# http://www.rssboard.org/rss-autodiscovery
#
# Usage:
# get-blogs-rss <blog URL> <feed output file>

use XML::Feed;

my @feeds;

open( FILE, "< $ARGV[0]" ) or exit 0;
while( <FILE> ) {
	next if /^(\s)*$/;
	chomp;
	my ($feed) = XML::Feed->find_feeds($_);
	push @feeds, $feed;
}
close FILE;

open (FILE, "> $ARGV[1]") or exit 0;
print FILE join("\n", @feeds);
close (FILE);
